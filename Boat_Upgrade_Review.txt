1) New boat/ship types and where they spawn
Lake “scene types” (in lake_defs.tres)

Lake types define what kinds of boats are allowed per lake scene:

basic: no boats

recreational: ["sailboat", "large_sailboat", "speedboat", "pontoon", "raft"]

fishing: ["fishing", "trawler", "raft"]

harbor: ["fishing", "trawler", "tugboat", "barge", "transport", "liner", "car_carrier", "oldtimey", "speedboat", "pontoon", "large_sailboat"]

So the new “big” ship types primarily appear in harbor lakes, and some “bigger small-craft” (like trawlers / large sailboats) also appear outside harbor but only on sufficiently large lakes (see min radius below).

2) Boat catalog: types, styles, and constraints
Each boat type has:

mesh_size (used for spacing + LOD sizing)

base-ish color

movement_pattern (stored, but not all patterns are implemented)

new: spawn_weight

new: min_lake_radius

new: styles[] + style_weights[] (weighted variant selection)

Here’s the full list of boat types and their styles as defined:

Small craft

fishing

styles: lobster, workboat, dory

min lake radius: 140

spawn weight: 1.3

Note: style is selected and stored but not currently used to change geometry (see “gaps” below)

sailboat

styles: sloop, cutter, dinghy

min radius: 140, weight: 1.1

Style does affect geometry (sail sizing + cutter gets a jib)

large_sailboat

styles: yacht, ketch, catamaran

min radius: 220, weight: 0.45

Style does affect geometry (catamaran = twin hulls; ketch = two masts)

speedboat

styles: runabout, sport, cigarette

min radius: 160, weight: 0.9

Note: style selected but not used in geometry

pontoon

styles: party, fishing, sunshade

min radius: 150, weight: 0.7

Note: style selected but not used in geometry

raft

styles: log_raft, inflatable, platform

min radius: 120, weight: 0.65

Style does affect geometry (inflatable tubes vs log cylinders vs platform + crate; sometimes gets a tiny sail)

Larger working boats / ships

trawler

styles: stern_trawler, side_trawler, longliner

min radius: 220, weight: 0.55

Style lightly affects geometry (cabin proportions/position)

tugboat

styles: harbor, river, work

min radius: 240, weight: 0.18

Style affects fenders count (harbor gets more)

barge

styles: flat, covered, container

min radius: 300, weight: 0.15

Style affects geometry (covered adds wheelhouse; container spawns container stacks)

transport

styles: container, tanker, ro_ro

min radius: 340, weight: 0.25

Style affects geometry (tanker adds deck tanks; ro_ro adds a big ro-ro box; container stacks otherwise)

liner

styles: classic, modern, mega

min radius: 420, weight: 0.10

Style affects geometry (mega = more superstructure layers)

car_carrier

styles: box, roro

min radius: 460, weight: 0.06

Style affects geometry (changes carrier box proportion)

oldtimey

styles: schooner, galleon, clipper

min radius: 360, weight: 0.12

Style affects geometry (galleon = 3 masts; clipper tweaks sail proportions and darkens hull in color scheme)

3) How boat “styles” + “unique colors” work
Weighted type selection (new)

Instead of uniform random selection, the generator now:

filters out any boat type where lake_radius < min_lake_radius

chooses from remaining types using spawn_weight

ramps “big-lake-only” boats in gradually via w *= clamp(lake_radius / min_r, 0..1.6) so they don’t suddenly appear at exactly the threshold.

Weighted style selection (new)

For a chosen boat type, it picks styles[i] by style_weights[i] and stores:

boat_root.set_meta("boat_style", style)

Color schemes (expanded)

Each boat gets a generated scheme dictionary, stored on the boat node:

boat_root.set_meta("color_scheme", scheme)

also stores accent_color and mesh_size

The scheme produces cohesive looks like:

“boat white hull + bright sail/stripe” for sailboats/liners

darker hull palettes for working boats/ships

per-boat accent color chosen from a palette with “avoid repeats across the world”; if palette exhausted it generates a procedural HSV accent.

Some styles influence scheme (examples):

catamaran: slightly more accent in hull

tanker: cargo color shifts darker/industrial

clipper: hull darker

inflatable raft: hull becomes rubbery/dark, deck lighter

4) Geometry: what was added for each boat type

All of the new “big” types are built procedurally out of BoxMesh / CylinderMesh / PlaneMesh, via helper functions like _add_box(), _add_cylinder(), _add_plane().

Added geometry builders:

_create_stylized_trawler

_create_stylized_tugboat

_create_stylized_barge

_create_stylized_transport

_create_stylized_liner

_create_stylized_car_carrier

_create_stylized_oldtimey_ship

_create_stylized_large_sailboat

_create_stylized_raft

plus a _create_generic_boat_fallback

And updated existing builders to accept style:

sailboat mast system now varies sail size; cutter adds a jib

large sailboat uses catamaran/ketch logic

5) Placement + density changes (why you’ll see “a lot of boats”)
Density defaults were increased (in both game.gd and lakes_component.gd)

boat_density_per_lake: 0.4 → 1.0

max_boats_per_lake: 8 → 24

max_buoys_per_lake: 20 → 50 (and the generator itself caps buoys at 40 in one place, so it’s “up to ~40–50” depending on which cap hits)

Anti-stacking placement (new)

Boat placement now tries to avoid overlapping boats by:

computing a clearance radius from mesh_size

retrying up to ~12 times to find a non-colliding position relative to already-placed boats.

6) LOD boat rendering was upgraded (important if you re-implement)

In lake_scenes_component.gd, the “simple boat” LOD used to be one generic box.

Now it builds a lightweight LOD boat using the original boat’s metadata:

reads boat_type, mesh_size, and color_scheme

sizes the hull appropriately (rafts flatter; ships longer/lower)

optionally adds a stripe for big ships

adds a small cabin/superstructure (skips for rafts)

preserves meta on the LOD node (boat_type, mesh_size, color_scheme, etc.)

So distant boats keep their identity and colors, not just “gray boxes”.

7) Gaps / “gotchas” you should know when re-implementing

Some styles are defined but don’t change geometry yet

fishing: lobster/workboat/dory (style stored, not used)

speedboat: runabout/sport/cigarette (stored, not used)

pontoon: party/fishing/sunshade (stored, not used)

If you want them to matter, you’d add branches inside:

_create_stylized_fishing_boat(... style)

_create_stylized_speedboat(... style)

_create_stylized_pontoon(... style)

Movement patterns are stored, but only 4 are implemented
BoatMovementController only executes:

patrol, sailing, racing, leisure
Everything else (like cargo, cruise, tug, trawl, drift, static) currently does nothing → those boats remain static unless you extend the controller.